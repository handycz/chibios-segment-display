# chibios-segment-display
Library for ChibiOS that supports multiple 7 and 16 segment displays 

## Usage
Documentation generated by Doxygen is in `doc` directory, simple example of use is in `examples/basic_example.c`, the library itself is in the `src` directory.
If you want to add this library to the project, don't forget to include header file `segdisp.h` from your code. Also you need to build .c (e.g. add them to the Makefile), for example
```
CSRC = $(STARTUPSRC) \
       $(KERNSRC) \
       $(PORTSRC) \
       $(OSALSRC) \
       $(HALSRC) \
       $(PLATFORMSRC) \
       $(BOARDSRC) \
       $(TESTSRC) \
	   $(CHIBIOS)/os/hal/lib/streams/chprintf.c \
	   segdisp.c \
	   util.c \
       main.c
```
for the Makefile provided with ChibiOS for STM32F4 Discovery (notice `segdisp.c` and `util.c`).

## Change display mapping
If you want to change what display shows, simply edit function `segdisp_7seg_char2ing` or `segdisp_16seg_char2ing` in the `segdisp.c` file. Each bit represents one segment.

## Compatibility

Tested with CL5642BH (7 segment) and HD-A822RD (16 segment) displays switched by NPN transistor and controlled by STM32F407 Discovery.